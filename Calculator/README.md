# 计算器项目

## 功能说明

这是一个基于Qt的计算器程序，实现了中缀表达式求值算法。

### 核心功能

1. **自定义栈数据结构** (`stack.h`)
   - 使用链表实现的栈
   - 支持基本的栈操作：push、pop、peek、isEmpty、size

2. **中缀表达式求值** (`expression_evaluator.h`)
   - 使用双栈算法（操作数栈 + 操作符栈）
   - 支持四则运算：+ - * /
   - 支持括号：( )
   - 支持小数运算
   - **支持隐式乘号**：如 `2(3+4)` 自动解释为 `2*(3+4)`，`(1+2)(3+4)` 自动解释为 `(1+2)*(3+4)`

3. **GUI界面** (`mainwindow.ui`, `mainwindow.cpp`)
   - 现代化深色主题
   - 清晰的按钮布局
   - 支持回退、清除功能
   - 完整的错误提示

### 隐式乘号功能

计算器会自动在以下情况插入乘号：
- 数字后跟左括号：`2(` → `2*(`
- 右括号后跟数字：`)2` → `)*2`
- 右括号后跟左括号：`)(` → `)*(`

例如：
- `1+(-2)(2+3)` → `1+(-2)*(2+3)` = -9
- `2(3+4)` → `2*(3+4)` = 14
- `(1+2)(3+4)` → `(1+2)*(3+4)` = 21

### 使用方法

1. 在Qt Creator中打开项目
2. 点击"构建"按钮（或按Ctrl+B）
3. 点击"运行"按钮（或按Ctrl+R）
4. 使用计算器进行计算

### 测试用例

正常测试：
- `6 * (2 + 3) / 5 + 7` = 13
- `11.2+3*(5.1-0.5)` = 25
- `1+(-2)(2+3)` = -9
- `2(3+4)` = 14

错误测试（会显示错误提示）：
- `1.5.5.` - 多个小数点
- `1++2` - 连续操作符
- `1/0` - 除零错误
- `)` - 不匹配的括号

### 项目结构

```
Calculator/
├── main.cpp                    # 主程序入口
├── mainwindow.h/cpp/ui        # 主窗口类
├── stack.h                    # 自定义栈数据结构
├── expression_evaluator.h    # 表达式求值器
├── CMakeLists.txt            # CMake构建文件
└── README.md                 # 本文件
```

### 编译说明

**重要：修改代码后需要重新构建项目**

1. 在Qt Creator中，点击菜单 "构建" → "重新构建"
2. 或者点击工具栏的"锤子"图标重新构建
3. 确保没有编译错误后再运行

如果出现问题：
1. 清理项目：构建 → 清理全部
2. 重新构建：构建 → 重新构建项目
3. 运行程序

### 已知问题

无

### 作者

计算器项目 - 表达式求值

